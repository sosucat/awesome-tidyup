# awesome-tidyup

A small helper to extract file metadata (including access restriction status) from exported
Canvas "TidyUp" HTML files and write the results to a CSV.

Contents
 - `src/awesome_tidyup/extract_files.py` — extractor script
 - `data/inputs/` — directory for input HTML exports (default input)
 - `files.csv` — output generated by the script (default output)

## Prerequisites
Install `pixi`

Quick installer (recommended for Linux/macOS):

```
curl -fsSL https://pixi.sh/install.sh | sh
```

Or with `wget`:

```
wget -qO- https://pixi.sh/install.sh | sh
```
After installing, restart your shell so the `pixi` binary is on your `PATH`.


## Quick Start
1. Install workspace dependencies:

    ```
    pixi install
    ```

2. Run the extractor

- Default (use `data/inputs/` and write `files.csv`):

    ```powershell
    pixi run python -m src.awesome_tidyup.extract_files
    ```

- Specify input directory or file and output path explicitly:

    ```powershell
    pixi run python -m src.awesome_tidyup.extract_files -i data/inputs -o files.csv
    pixi run python -m src.awesome_tidyup.extract_files -i data/inputs/CS-6000-O01.html -o files.csv
    ```

## Output

The script writes a `files.csv` file with the following columns (header row):

| Column | Description |
|---|---|
| `course_number` | Identifier derived from the input HTML filename (file stem). Example: `CS-6000-O01` |
| `filename` | The stored file name |
| `access_restriction` | `none` or `restricted` |
| `used_in` | Where the file is used (page/module) or `Not Used` |
| `last_updated` | Last-modified date reported in the export |
| `size` | Human-readable file size (KB, MB) |

Notes
- The parser includes a fallback for malformed HTML exports and detects Canvas access restrictions by inspecting the `file-lock` span classes.

Links
- Pixi installation docs: https://pixi.prefix.dev/latest/installation/

License & contact

- MIT License — see `LICENSE` file.
- Contact: Sosuke Ichihashi <pengu1n.i843@gmail.com>
